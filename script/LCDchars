#!/bin/sh
infile=prilohy/AlarmClock/lib/GUI/LCDchars.cpp
outfile=LCDchars.tex

sed -En '
    '"1i% This file was automatically generated by $0 from $infile.\n"'
    /^byte LCD_char_/,/};/{
        /^ *B[01]*,?$/{
            s/^ *B/    /;
            s/,?$/%/;
        }
        /^byte LCD_char_/{
            s/^byte LCD_char_([^[]*)\[\] = \{/\\DefineLCDchar{\1}{%/;
        }
        s/^\};$/}\n/;
        p
    }' "$infile" > "$outfile"
